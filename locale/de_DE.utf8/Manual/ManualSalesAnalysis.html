<br /><br />

<!-- Help Begin: SalesAnalRepts -->

<a name="SalesAnalysis"><font size="+3"><b>Umsatzauswertungen</b></font></a>
<br /><br />
Es gibt verschiedene M�glichkeiten, die Ums�tze zu analysieren. Wenn eine schnelle Auswertung erforderlich ist, gibt es eine gewisse Flexibilit�t im Skript SalesGraph.php, das Sie �ber Hauptmen� &rarr; Debitoren &rarr; Auswertungen und Berichte &rarr; Umsatzgrafik aufrufen, Es h�ngt nat�rlich von der Ebene ab, auf der Sie Planwerte hinterlegt haben, ob ein Plan-/Ist-Vergleich etwas Sinnvolles anzeigen wird. Wenn Sie einen Bericht zu den Istzahlen w�nschen, so hat webERP einen Berichtsgenerator, mit dem Ergebnisberichte angelegt werden k�nnen. Die erzeugten Berichtsvorlagen k�nnen wiederholt ausgef�hrt oder aber abge�ndert werden. Diese Berichte k�nnen sowohl eine PDF-Datei in Druckformatierung als auch csv-Dateien f�r die Verwendung in den meisten Tabellenkalkulationen ausgeben.
<br /><br />
Sie w�hlen Hauptmen� &rarr; Debitoren &rarr; Auswertungen und Berichte &rarr; Umsatzanalysen. Eine Liste aller bereits fr�her angelegten Berichte erscheint, einschlie�lich Links, �ber die Sie
<br /><br />
<ul>
<li>den Entwurf des Berichtskopfes �ndern</li>
<li>in der Definition des Berichtes die Spalten festlegen</li>
<li>den Bericht ausf�hren und eine PDF-Datei erstellen</li>
<li>den Bericht ausf�hren und eine CSV-Datei erstellen, die mit einer Tabellenkalkulation gelesen werden kann.</li>
</ul>
Dar�ber hinaus k�nnen Sie im unteren Teil der Seite neue Berichte definieren, um die meisten Kombinationen von Umsatzdaten anzuseigen. Im System wird eine separate Tabelle von Umsatzdaten gef�hrt, die es erm�glichen, dass diese Berichte so schnell wie m�glich ausgef�hrt werden k�nnen.
<br /><br />
Ein Ergebnisbericht besteht aus
<br /><br />
<ul>
<li>der Kopfdefinition</li>
<li>den Spaltendefinitionen</li>
</ul>
<b>
Kopf des Ergebnisberichtes
</b>
<br /><br />
Der erste Schritt beim Erstellen eines Ergebnisberichtes ist das Eingeben der Kopfinformationen. Diese beinhalten:
<br /><br />
<ul>
<li>Die Berichts�berschrift, eine Zeichenkette, die den Bericht beschreibt.</li>
<li>Bis zu vier Gruppenebenen und die Auswahlkriterien f�r jede Ebene.</li>
</ul>
Jede Gruppenebene besteht aus einer der folgenden Merkmale:
<br /><br />
<ul>
<li>Vertriebsbereiche</li>
<li>Materialnummer</li>
<li>Kundennummer</li>
<li>Umsatzart/Preisliste</li>
<li>Warengruppe</li>
<li>Kundenniederlassung</li>
<li>Verk�ufer</li>
</ul>
Der Bericht gruppiert die Daten auf jeder Ebene entsprechend der definierten Reihenfolge, wenn Sie z. B. einen Bericht definieren mit Materialnummer als Gruppenebene 1 und die Vertriebsbereiche als Gruppenebene 2, dann zeigt der Bericht die Materialnummern und darunter die Vertriebsbereiche, an die die Waren verkauft wurden. Meist w�rde es die logischere Reihenfolge sein, die Vertriebsbereiche als Gruppenebene 1 und die Materialnummer als Gruppenebene 2 anzuzeigen, damit der Bericht erl�utert, aus welchen Produkten sich der Umsatz in einem Vertiebsbereich zusammensetzt.
<br /><br />
F�r jede Gruppenebene muss ein Von-Bis-Bereich als Selektion angegeben werden. Alle Kriterien beziehen sich auf das Merkmal in der jeweiligen Gruppenebene. F�r das Merkmal Vertriebsbereich m�ssen Sie zum Beispiel die 2 Zeichen langen Schl�ssel der Vertriebsbereiche, nicht deren Beschreibung angeben. Au�erdem muss der Von-Wert kleiner sein als der Bis-Wert, andernfalls gibt der Bericht keine Werte aus.
<br /><br />
<b>
Spalten der Ergebnisberichte
</b>
<br /><br />
Wenn Sie einen Kopf f�r den Bericht angelegt haben, dann k�nnen die Spalten definiert werden. Die Spalten vorhandener Berichte k�nnen jederzeit ge�ndert werden. Aus der Seite Umsatzbericht pflegen (Hauptmen� &rarr; Debitoren &rarr; Auswertungen und Berichte &rarr; Umsatzanalysen) ist bei jedem Bericht ein Link "Spalten festlegen". �ber diesen Link werden die f�r den Bericht definierten Spalten angezeigt, zusammen mit einem Formular, in dem Sie neue Spalten anlegen k�nnen. F�r jede definierte Spalte sind die folgenden Angaben n�tig:
<br /><br />
<ul>
<li>Eine Spaltennummer zwischen 1 und 10. Die Nummer bestimmt, an welcher Stelle die Spalte auf der Seite ausgegeben wird. Die Spalte 1 ist am weitesten links und die Spalte 10 am rechten Rand der Seite.</li>
<li>Zwei Felder sind f�r die Spalten�berschrift vorhanden. In jedes passt ein Text mit maximal 15 Zeichen L�nge.</li>
<li>Ob es sich um eine Rechenspalte handelt oder nicht. F�r Rechenspalten sind andere Angaben erforderlich, als f�r normale Datenspalten.</li>
<li>F�r normale Datenspalten ist ein Periodenzeitraum f�r die anzuzeigenden Daten erforderlich. In die Felder Von Periode und Bis Periode muss jeweils eine Zahl eingegeben werden. Weil Perioden vom System ann�hernd unsichtbar im Hintergrund verwaltet werden, haben Sie �ber den Link "Perioden anzeigen" die M�glichkeit zu pr�fen, in welchen Perioden irgendwelche Zahlen vorhanden sein k�nnen. Wenn ein einzelner Monat gew�nscht ist, ist der Wert in Von Periode und Bis Periode gleich.</li>
<li>Die Art der Daten, die in der Spalte angezeigt werden sollen kann aus der folgenden Auswahl festgelegt werden: Menge, Bruttoerl�s, Nettoerl�s (nach Rabatten), Bruttoergebnis, Kosten und Rabatt.</li>
<li>Planwerte oder Istwerte.</li>
</ul>
Wenn die Spalte als Rechenspalte definiert wird, ist weder die Angabe der Perioden erforderlich, noch die der Datenart und ob Plan oder ist. Wenn Sie das Feld Berechnung ge�ndert haben, m�ssen Sie zun�chst auf Speichern klicken, dadurch werden die f�r Rechenspalten notwendigen Felder angezeigt:
<br /><br />
<ul>
<li>Z�hlerspalte - Das ist die Spaltennummer f�r den ersten Operanden der Berechnung, diese Spalte muss immer angegeben werden.</li>
<li>Nennerspalte - Das ist die Spaltennummer f�r den zweiten Operanden der Berechnung, wenn die Berechnung �ber zwei Spalten erfolgen soll. Wenn die Berechnung mit einer Konstante durchgef�hrt werden soll, lassen Sie dieses Feld leer.</li>
<li>Das Rechenzeichen wird aus folgenden Angaben ausgew�hlt.
<ol>
<li>Z�hlerspalte geteilt durch Nennerspalte</li>
<li>Z�hlerspalte geteilt durch Konstante</li>
<li>Z�hlerspalte x Kontstante</li>
<li>Z�hlerspalte plus Nennerspalte</li>
<li>Z�hlerspalte minus Nennerspalte</li>
</ol></li>
<li>Die Kostante kann eine beliebige Zahl sein, die in der Berechnung verwendet wird.</li>
<li>Das Format erlaubt es, das Ergebnis als Zahl oder als Prozentwert auszugeben.</li>
</ul>
Wenn Sie den Knopf Speichern dr�cken, wird die Spalte in die Berichtsdefinition eingef�gt. Sie sollte dann in der Liste der definierten Spalten angezeigt werden und die Formularfelder sind wieder frei f�r die Erfassung einer neuen Spalte. Wenn Sie eine Spalte nicht mehr ben�tigen, gibt es auch einen Link zum L�schen.
<br /><br />
Die Spaltennummer selbst ist ein Link, �ber den Sie die Definition der Spalte ver�ndern k�nnen. Die Definition wird im Eingabeformular angezeigt, falls �nderungen n�tig werden. Beachten Sie bitte, dass sich die Spaltennummer selbst nicht �ndern l�sst.
<br /><br />
Wenn Sie den Link �berschriften pflegen dr�cken wird wieder die Liste der angelegten Berichte angezeigt, um weitere �nderungen vornehmen zu k�nnen oder einen Bericht auszuf�hren. Um den Bericht auszuf�hren, klicken Sie einfach auf den Link "PDF erstellen" des Berichtes.
<br /><br />
Diese Ergebnisberichte haben eine gro�e Menge von Informationen auszuwerten (und die Berichte werden dynamisch generiert). Im Ergebnis k�nnen sie bei gro�en Datenbanken durchaus eine Minute oder so laufen. Dennoch wurde das Design der Datenbank sehr sorgf�ltig vorgenommen, um zu sichern, dass die Berichte entscheidend schneller als bei anderen Auswertungswerkzeugen erstellt werden.
<br /><br />
<b>
Automatisierung der Ergebnisberichte
</b>
<br /><br />
Wenn Sie die Berichte angelegt haben, ist es m�glich, die Ergebnisberichte per Email an festgelegte Empf�nger zu versenden. Ein Skript MailSalesReport.php ist eine Vorlage, um so etwas zu tun. Es gibt keine Links zu diesem Skript, und es ist auch keine Berechtigungsebene daf�r festgelegt worden. Alles was Sie tun m�ssen, ist dieses Skript unter einem anderen Namen mit der Erweiterung .php im selben Verzeichnis, in dem auch die anderen Skripte liegen zu speichern.
<br /><br />
Das Skript muss bearbeitet werden, um die Email-Adressen der Empf�nger und die Berichts-Nr. des auszuf�hrenden Berichtes einzutragen. Die zu bearbeitenden Zeilen sind:
<br /><br />
/*The Sales report to send */
<br />
$ReportID = 4;
<br /><br />
/*The people to receive the emailed report */
<br />
$Recipients = array('"Root" &lt;root@localhost&gt;','"some one else" &lt;someoneelese@sowhere.com&gt;');
<br /><br />
Die mit /* und */ eingeklammerten Zeilen sind Kommentare.
<br /><br />
Wenn die Variable $ReportID nach Ihrer Wahl gesetzt ist und alle Empf�nger eingetragen sind, sichern Sie die Datei.
<br /><br />
Um den Bericht einzuplanen, w�rde ein crontab-Eintrag unter Linux, der den Bericht an jedem Wochentag um 0:00 startet, wie folgt aussehen (angenommen sei: wget ist in /usr/bin/wget, der Webserver l�uft auf dem gleichen Rechner und das neue Skript hei�t DailySalesReport.php):
<br /><br />
# Scheduled email of a daily sales report
<br /><br />
0 0 * * 2-5 root /usr/bin/wget http://localhost/web-erp/DailySalesReport.php
<br /><br />
Weil die Seite selbst keine Ausgabe am Bildschirm bewirkt, w�rde sie im Webbrowser nichts anzeigen, obgleich sie nat�rlich eine weitere Email an die festgelegten Empf�nger ausl�sen w�rde.
<br /><br />
Ein vergleichbares Vorlageskript ist unter dem Namen MailSalesReport_csv.php vorhanden, das in der gleichen Weise den Bericht als CSV-Datei an die festgelegten Empf�nger versendet.
Eine elegantere L�sung, automatisch Umsatzberichte mit email zu versenden, ist die verwendung des Skriptes report_runner.php. Dieses Skript kann direkt von der Kommandozeile gestartet werden oder con cron gestartet werden und verwendet Kommandozeilenparameter. Das den Vorzug gegen�ber der festen Programmierung einer Vielzahl von Skripten, ist dass dieses mit den folgenden Parametern gestartet werden kann:
<br /> -r reportnumber (die Nummer des webERP-Berichtes)
<br /> -n reportname   (der Name, dem Sie dem webERP-Bericht geben wollen)
<br /> -e emailaddress[;emailaddress;emailaddres...] (an wen Sie den Bericht senden wollen)
<br /> [-t reporttext ]  (Einige Bemerkungen, die Sie mit dem Bericht in der email vesenden wollen)
<br /> [ -H weberpHOME]  (das Homeverzeichnis von webERP - oder Sie bearbeiten die php-Datei)

<!-- Help End: SalesAnalRepts -->
